<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>EmpoWered in Tech</title>
    <!-- load local stylesheet (css) -->
    <link rel="stylesheet" href="/styles.css" />
    <!-- loading jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <%- include("partials/navbar.ejs") %>
    <%- include("partials/flashes.ejs") %>
    
<form class="form"
     id="opportunityForm"
     method="POST"
     action="/updatePost/<%= opp.oid %>">
   <p><label>Opportunity Name: <input name="opportunityName" value="<%= opp.name %>" required></label></p>


   <p><label>Application Link: <input type=text name="applicationLink" value="<%= opp.link %>" required></label></p>


   <p><label>Opportunity Type:
   <select name="oppType" value="<%= opp.type %>"" required>
       <option name="type" value="">Choose type</option>
       <% if (isSelectedConf){ %>
       <option name="type" value="Conference" selected>Conference</option>
       <% } else { %>
       <option name="type" value="Conference">Conference</option>
       <% } %>
       <% if (isSelectedFel){ %>
       <option name="type" value="Fellowship" selected>Fellowship</option>
       <% } else { %>
       <option name="type" value="Fellowship">Fellowship</option>
       <% } %>
       <% if (isSelectedJob){ %>
       <option name="type" value="Full-time Job" selected>Full-time Job</option>
       <% } else { %>
       <option name="type" value="Full-time Job">Full-time Job</option>
       <% } %>
       <% if (isSelectedInt){ %>
       <option name="type" value="Internship" selected>Internship</option>
       <% } else { %>
       <option name="type" value="Internship">Internship</option>
       <% } %>
       <% if (isSelectedRes){ %>
       <option name="type" value="Research" selected>Research</option>
       <% } else { %>
       <option name="type" value="Research">Research</option>
       <% } %>
       <% if (isSelectedWork){ %>
       <option name="type" value="Workshop" selected>Workshop</option>
       <% } else { %>
       <option name="type" value="Workshop">Workshop</option>
       <% } %>
       <% if (isSelectedOther){ %>
       <option name="type" value="Other" selected>Other</option>
       <% } else { %>
       <option name="type" value="Other">Other</option>
       <% } %>
   </select>
   </label></p>


   <p><label>If "Other", please specify: <input type=text name="otherOppType" value="<%= opp.type[1] %>"></label></p>


   <p><label>Organization/Company: <input type=text name="org" value="<%= opp.org %>" required></label></p>


   <div id="oppSubfieldDropdown" class="dropdown-check-list" tabindex="100">
       <span class="oppSubfield">Choose Opportunity Subfield(s):</span>
       <ul class="items">
        <% if (isCheckedBio){ %>
         <li><label><input type="checkbox" name ="subfield" value="bioinformatics" checked/>Bioinformatics</label></li>
         <% } else { %>
         <%# <li><label><input type="checkbox" name ="subfield" value="bioinformatics"/>Bioinformatics</label></li> %>
         <% } %>
         <% if (isCheckedCloud){ %>
         <li><label><input type="checkbox" name ="subfield" value="cloud" checked/>Cloud Computing/Development</label></li>
         <% } else {%>
         <li><label><input type="checkbox" name ="subfield" value="cloud"/>Cloud Computing/Development</label></li>
         <% } %>
         <% if (isCheckedCompVision){ %>
         <li><label><input type="checkbox" name ="subfield" value="compVision" checked/>Computer Vision</label></li>
         <% } else {%>
         <li><label><input type="checkbox" name ="subfield" value="compVision"/>Computer Vision</label></li>
         <% } %>
         <% if (isCheckedDataScience){ %>
         <li><label><input type="checkbox" name ="subfield" value="dataScience" checked/>Data Science</label></li>
         <% } else {%>
         <li><label><input type="checkbox" name ="subfield" value="dataScience"/>Data Science</label></li>
         <% } %>
         <% if (isCheckedGraphics){ %>
         <li><label><input type="checkbox" name ="subfield" value="graphics" checked/>Graphics</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="graphics"/>Graphics</label></li>
         <% } %>
         <% if (isCheckedHci){ %>
         <li><label><input type="checkbox" name ="subfield" value="hci" checked/>Human-Computer Interaction</label></li>
         <% } else {%>
         <li><label><input type="checkbox" name ="subfield" value="hci"/>Human-Computer Interaction</label></li>
         <% } %>
         <% if (isCheckedML){ %>
         <li><label><input type="checkbox" name ="subfield" value="ml" checked/>Machine Learning</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="ml"/>Machine Learning</label></li>
         <% } %>
         <% if (isCheckedProdDesign){ %>
         <li><label><input type="checkbox" name ="subfield" value="prodDesign" checked/>Product Design</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="prodDesign"/>Product Design</label></li>
         <% } %>
         <% if (isCheckedProdMgmt){ %>
         <li><label><input type="checkbox" name ="subfield" value="prodMgmt" checked/>Product Management</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="prodMgmt"/>Product Management</label></li>
         <% } %>
         <% if (isCheckedSWE){ %>
         <li><label><input type="checkbox" name ="subfield" value="swe" checked/>Software Engineering</label></li>
         <% } else { %>
            <li><label><input type="checkbox" name ="subfield" value="swe"/>Software Engineering</label></li>
         <% } %>
         <% if (isCheckedSystems){ %>
         <li><label><input type="checkbox" name ="subfield" value="systems" checked/>Systems</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="systems"/>Systems</label></li>
         <% } %>
         <% if (isCheckedUiUx){ %>
         <li><label><input type="checkbox" name ="subfield" value="uiux" checked/>UI/UX</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="uiux"/>UI/UX</label></li>
         <% } %>
         <% if (isCheckedOther){ %>
         <li<label><input type="checkbox" name ="subfield" value="other" checked/>Other</label></li>
         <%} else {%>
         <li><label><input type="checkbox" name ="subfield" value="other"/>Other</label></li>
         <% } %>
        </ul>
     </div>


   <p><label>If "Other", please specify: <input type=text name="otherOppSubfield" value="<%= opp.subfield[0] %>"></label></p>


   <p><label>Location (put "remote" if remote opportunity): <input name="location" value="<%= opp.location %>" required></label></p>


   <p><label>Spam/Flyer (optional): <input type=file name="spam" value="<%= opp.spam %>"></label></p>


   <p><label>Expiration (optional):
       <% let todayDate = new Date();
       let month;
       if (todayDate.getMonth() + 1 < 10){month = "0" + String(todayDate.getMonth() + 1);}
       else{month = String(todayDate.getMonth() + 1);};
       let strTodayDate = "" + String(todayDate.getFullYear()) + "-" 
                        + month + "-"
                        + String(todayDate.getDate());
       
       let endDate = new Date();
       endDate.setFullYear(endDate.getFullYear() + 2);
       let endMonth;
       if (endDate.getMonth() + 1 < 10){endMonth = "0" + String(endDate.getMonth() + 1);}
       else{endMonth = String(endDate.getMonth() + 1);};
       let strEndDate = "" + String(endDate.getFullYear()) + "-" 
                        + endMonth + "-"
                        + String(endDate.getDate()); %>
       <input name="due" type=date value="<%= opp.expiration %>" min="<%= strTodayDate %>" max="<%= strEndDate %>">
   </label></p>


   <p><label>Referral Link (optional): <input type=text name="<%= opp.referralLink %>"></label></p>


   <p><label>Description (optional):
       <textarea rows="3" cols="30" name="description" value="<%= opp.description %>"></textarea>
   </label></p>


   <p>Posted by: <%= addedBy.name %> %></p>

   <p><button type="submit">Update!</button></p>
</form>

<form method="POST" action="/post/delete/<%=opp.oid%>">
    <input type="submit" value="delete <%=opp.oid%>">
</form>  

</body>
</html>